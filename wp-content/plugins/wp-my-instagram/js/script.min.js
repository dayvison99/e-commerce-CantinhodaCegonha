!function(c){"use strict";c(document).ready(function(){var a=c('.wp-my-instagram.wpmi[data-cached="false"]');c(document.body).on("wp-my-instagram-load",function(a,e){c.ajax({url:wpMyInstagramVars.ajaxurl,type:"POST",async:!0,cache:!1,data:{action:"wpmi-request-cache",security:wpMyInstagramVars.nonce,data:e}}).done(function(a){if(a&&a.data)for(var e in a.data){var t=c("#"+e+".wp-my-instagram.wpmi");c(".wpmi-list",t).html(a.data[e]),t.attr("data-cached","true")}})}),a.length&&a.each(function(a){var e=c(this);!function(n,a){var o={username:"",hashtag:"",limit:6,popular:!1};c.extend(!0,o,a);var e=o.username||!1,d=o.hashtag||!1,m=o.popular||!1,t="https://instagram.com/",r=t+e;e||d?(d&&(r=t+"explore/tags/"+d),c.ajax({type:"GET",url:r,async:!0,cache:!1}).done(function(a){if(d){var e=m?"edge_hashtag_to_top_posts":"edge_hashtag_to_media";a=JSON.parse(a.split("window._sharedData = ")[1].split(";<\/script>")[0]).entry_data.TagPage[0].graphql.hashtag[e].edges}else a=JSON.parse(a.split("window._sharedData = ")[1].split(";<\/script>")[0]).entry_data.ProfilePage[0].graphql.user.edge_owner_to_timeline_media.edges;if(a){var t=[];for(var r in a){var s=a[r].node,i={};if(i.thumbnail=((s||{}).thumbnail_resources[0]||{}).src||"",i.xsmall=((s||{}).thumbnail_resources[1]||{}).src||"",i.small=((s||{}).thumbnail_resources[2]||{}).src||"",i.medium=((s||{}).thumbnail_resources[3]||{}).src||"",i.large=(s||{}).thumbnail_src||"",i.original=(s||{}).display_url||"",i.url=s.shortcode?"//instagram.com/p/"+s.shortcode:"",i.type=s.is_video?"video":"image",i.description=((((s||{}).edge_media_to_caption||{}).edges[0]||{}).node||{}).text||"",i.time=s.taken_at_timestamp||"",i.comments=((s||{}).edge_media_to_comment||{}).count||"",i.likes=s.edge_liked_by.count||"",t[t.length]=i,t.length===parseInt(o.limit))break}t.length&&c(document.body).trigger("wp-my-instagram-load",{id:n,args:o,images:t})}})):console.log("No hashtag or username provided.")}(e.attr("id"),e.data("args"))})})}(window.jQuery);